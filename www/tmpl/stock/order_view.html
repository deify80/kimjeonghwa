<div class="classify-box2">
	{@ list}
	<div>
		<div class="classify">{.name}</div>
		<table class="table table-bordered">
			<colgroup>
				<col style="width:150px">
				<col style="width:100px">
				<col>
				<col style="width:100px">
			</colgroup>
			{@ .children}
			{@ ..children}
			{? ...index_==0}
			<tr>
				<th rowspan="{..count}" style="background-color:#f5f5f5">{..name}</th>
				<td>{...goods_code}</td>
				<td>{...goods_name}</td>
				<td>{=number_format(...cnt)}개</td>
			</tr>
			{:}
			<tr>
				<td>{...goods_code}</td>
				<td>{...goods_name}</td>
				<td>{=number_format(...cnt)}개</td>
			</tr>
			{/}
			{/}
			{/}
		</table>
	</div>
	{/}
</div>

{? order.comment}
<div class="well" style="margin-top:10px">
	{order.comment}
</div>
{/}


<div class="area-button">
	<!--
	<button type="submit" class="btn btn-theme btn-lg">저장</button>
	-->
	{? order.status == 'wait' //대기상태인경우에만 삭제가능}
	<button type="button" class="btn btn-flat-orange btn-lg" onclick="OrderView.cancel()">발주취소</button>
	{/}
	<button type="button" class="btn btn-gray btn-lg modal-close">닫기</button>
</div>


<script type="text/javascript">
var OrderView = {
	no:'{order.no}',
	cancel: function() {
		var no = OrderView.no;
		HmisAlert.confirm('발주 취소시 해당 발주서는 삭제됩니다.<br />발주취소하시겠습니까?', function(r) {
			if(r) {
				$.ajax({
					url:'/stock_proc/order_cancel',
					data:{
						no:no
					},
					dataType:'json',
					type:'POST',
					success: function(r) {
						if(r.success) {
							HmisAlert.alert(r.msg, function() {
								$('.modal-close').trigger('click');
							});
						}
						else {
							HmisAlert.alert(r.msg);
						}
					}
				})
			}
		});

	}
};
</script>
